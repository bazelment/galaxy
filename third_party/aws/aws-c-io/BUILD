cc_library(
    name = "aws-c-io",
    includes = [
        "src/include",
    ],
    copts = [
        "-Ithird_party/aws/aws-c-io/src/source/pkcs11/v2.40",
        "-Ithird_party/aws/aws-c-io/src/source",
    ],
    hdrs = [
        "src/include/aws/io/channel.h",
        "src/include/aws/io/channel_bootstrap.h",
        "src/include/aws/io/event_loop.h",
        "src/include/aws/io/exports.h",
        "src/include/aws/io/file_utils.h",
        "src/include/aws/io/host_resolver.h",
        "src/include/aws/io/io.h",
        "src/include/aws/io/logging.h",
        "src/include/aws/io/message_pool.h",
        "src/include/aws/io/pipe.h",
        "src/include/aws/io/pkcs11.h",
        "src/include/aws/io/private",
        "src/include/aws/io/retry_strategy.h",
        "src/include/aws/io/shared_library.h",
        "src/include/aws/io/socket.h",
        "src/include/aws/io/socket_channel_handler.h",
        "src/include/aws/io/statistics.h",
        "src/include/aws/io/stream.h",
        "src/include/aws/io/tls_channel_handler.h",
        "src/include/aws/io/uri.h"
    ],
    srcs = [
        "src/source/alpn_handler.c",
        "src/source/channel.c",
        "src/source/channel_bootstrap.c",
        "src/source/event_loop.c",
        "src/source/exponential_backoff_retry_strategy.c",
        "src/source/host_resolver.c",
        "src/source/io.c",
        "src/source/message_pool.c",
        "src/source/pem_utils.c",
        "src/source/pkcs11_lib.c",
        "src/source/pkcs11_tls_op_handler.c",
        "src/source/pki_utils.c",
        "src/source/retry_strategy.c",
        "src/source/socket_channel_handler.c",
        "src/source/standard_retry_strategy.c",
        "src/source/statistics.c",
        "src/source/stream.c",
        "src/source/tls_channel_handler.c",
        "src/source/tls_channel_handler_shared.c",
        "src/source/posix/host_resolver.c",
        "src/source/posix/pipe.c",
        "src/source/posix/shared_library.c",
        "src/source/posix/socket.c",
        "src/source/linux/epoll_event_loop.c",
        "src/source/pkcs11_private.h",
        "src/source/pkcs11/v2.40/pkcs11.h",
        "src/source/pkcs11/v2.40/pkcs11f.h",
        "src/source/pkcs11/v2.40/pkcs11t.h",
        # "src/source/bsd",
        # "src/source/s2n/s2n_tls_channel_handler.c"
        # "src/source/windows"
    ],
    deps = [
        "//third_party/aws/aws-c-common",
        "//third_party/aws/aws-c-cal",
    ],
    visibility = [
        "//visibility:public",
    ]
)
