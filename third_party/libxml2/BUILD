cc_library(
    name = "libxml2",
    visibility = [
        "//visibility:public",
    ],
    includes = [
        "src/include",
        # TODO: auto generate xmlversion.h based on building platform
        # instead of running configure.
        "build/linux-x64/include",
    ],
    hdrs = [
        "build/linux-x64/include/libxml/xmlversion.h",
        "src/include/libxml/DOCBparser.h",
        "src/include/libxml/entities.h",
        "src/include/libxml/threads.h",
        "src/include/libxml/xmlreader.h",
        "src/include/libxml/HTMLparser.h",
        "src/include/libxml/globals.h",
        "src/include/libxml/tree.h",
        "src/include/libxml/xmlregexp.h",
        "src/include/libxml/HTMLtree.h",
        "src/include/libxml/hash.h",
        "src/include/libxml/uri.h",
        "src/include/libxml/xmlsave.h",
        "src/include/libxml/Makefile.am",
        "src/include/libxml/list.h",
        "src/include/libxml/valid.h",
        "src/include/libxml/xmlschemas.h",
        "src/include/libxml/SAX.h",
        "src/include/libxml/nanoftp.h",
        "src/include/libxml/xinclude.h",
        "src/include/libxml/xmlschemastypes.h",
        "src/include/libxml/SAX2.h",
        "src/include/libxml/nanohttp.h",
        "src/include/libxml/xlink.h",
        "src/include/libxml/xmlstring.h",
        "src/include/libxml/c14n.h",
        "src/include/libxml/parser.h",
        "src/include/libxml/xmlIO.h",
        "src/include/libxml/xmlunicode.h",
        "src/include/libxml/catalog.h",
        "src/include/libxml/parserInternals.h",
        "src/include/libxml/xmlautomata.h",
        "src/include/libxml/xmlversion.h.in",
        "src/include/libxml/chvalid.h",
        "src/include/libxml/pattern.h",
        "src/include/libxml/xmlerror.h",
        "src/include/libxml/xmlwriter.h",
        "src/include/libxml/debugXML.h",
        "src/include/libxml/relaxng.h",
        "src/include/libxml/xmlexports.h",
        "src/include/libxml/xpath.h",
        "src/include/libxml/dict.h",
        "src/include/libxml/schemasInternals.h",
        "src/include/libxml/xmlmemory.h",
        "src/include/libxml/xpathInternals.h",
        "src/include/libxml/encoding.h",
        "src/include/libxml/schematron.h",
        "src/include/libxml/xmlmodule.h",
        "src/include/libxml/xpointer.h"
    ],
    srcs = [
        "src/SAX.c",
        "src/entities.c",
        "src/encoding.c",
        "src/error.c",
        "src/parserInternals.c",
        "src/parser.c",
        "src/tree.c",
        "src/hash.c",
        "src/list.c",
        "src/xmlIO.c",
        "src/xmlmemory.c",
        "src/uri.c",
        "src/valid.c",
        "src/xlink.c",
        "src/HTMLparser.c",
        "src/HTMLtree.c",
        "src/debugXML.c",
        "src/xpath.c",
        "src/xpointer.c",
        "src/xinclude.c",
        "src/nanohttp.c",
        "src/nanoftp.c",
        "src/DOCBparser.c",
        "src/catalog.c",
        "src/globals.c",
        "src/threads.c",
        "src/c14n.c",
        "src/xmlstring.c",
        "src/buf.c",
        "src/xmlregexp.c",
        "src/xmlschemas.c",
        "src/xmlschemastypes.c",
        "src/xmlunicode.c",
        # "src/triostr.c",
        # "src/trio.c",
        "src/xmlreader.c",
        "src/relaxng.c",
        "src/dict.c",
        "src/SAX2.c",
        "src/xmlwriter.c",
        "src/legacy.c",
        "src/chvalid.c",
        "src/pattern.c",
        "src/xmlsave.c",
        "src/xmlmodule.c",
        "src/schematron.c",
        "src/xzlib.c",
        "src/buf.h",
        "src/elfgcchack.h",
        "src/enc.h",
        "src/libxml.h",
        "src/save.h",
        "src/timsort.h",
        "src/trio.h",
        "src/triodef.h",
        "src/trionan.h",
        "src/triop.h",
        "src/triostr.h",
        "src/xzlib.h",
        "build/linux-x64/config.h",
    ],
    copts = [
        "-Ithird_party/libxml2/src",
        "-Ithird_party/libxml2/build/linux-x64",
    ],
    deps = [
    ],
    linkopts = [
        # TODO: zlib and lzma should build from source.
        "-lz",
        "-llzma",

    ],
)
